<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Stability" 
        xmlns:Device="clr-namespace:Stability.Model.Device"
        xmlns:zedGraph="clr-namespace:ZedGraph;assembly=ZedGraph"
        x:Class="Stability.MainWindow"
      
    Title="Stability" Height="601" Width="932" Closing="OnClose" UseLayoutRounding="True" WindowStartupLocation="CenterScreen">
    <Window.Resources>

        <local:DateConverter x:Key="DateConverter"/>
        <local:DateTimeConverter x:Key="DateTimeConverter"/>
        <local:SexesConverter x:Key="SexesConverter"/>
        <Device:cDeviceItem x:Key="DeviceItem"/>
        
        <ControlTemplate x:Key="ButtonTemplate" TargetType="{x:Type Button}">
            <Border BorderBrush="Transparent" BorderThickness="0" 
                    x:Name="border" 
                    Width="40" 
                    Height="40" 
                    Background="Transparent"
                    Padding="{TemplateBinding Property=Padding}"
                    HorizontalAlignment="{TemplateBinding Property=HorizontalAlignment}"
                    VerticalAlignment ="{TemplateBinding Property=VerticalAlignment}"
                    >
                <ContentPresenter RecognizesAccessKey="True"/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="border" Property="Width" Value="50"/>
                    <Setter TargetName="border" Property="Height" Value="50"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="border" Property="Width" Value="45"/>
                    <Setter TargetName="border" Property="Height" Value="45"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Window.Resources>

    <Grid Margin="0,0,0,0           ">
        <Grid.Background>
            <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                <GradientStop Color="White" Offset="1"/>
                <GradientStop Color="#FF8F8F8F"/>
            </LinearGradientBrush>
        </Grid.Background>
        <Grid.RowDefinitions>
            <RowDefinition x:Name="MenuRow" Height="20*" MaxHeight="20" MinHeight="20"/>
            <RowDefinition x:Name="MainRow" Height="29*" MinHeight="29"/>
            <RowDefinition x:Name="InfoRow" Height="40*" MaxHeight="40" MinHeight="40"/>
        </Grid.RowDefinitions>

        <Menu Grid.Row="0" Height="20" VerticalAlignment="Top">
            <MenuItem  Header="Connection">
                <MenuItem x:Name="Con" Header="Connect" Visibility="Collapsed" Click="Con_OnClick"/>
                <MenuItem x:Name="Discon"  Header="Disconnect" Visibility="Collapsed" Click="Discon_OnClick"/>
                <MenuItem Header="Autoconnect" IsCheckable="True" IsChecked="True" Checked="MenuItem_OnChecked" Unchecked="MenuItem_OnUnchecked"/>
                <Separator/>
                <MenuItem Header="Exit" Click="OnExit"/>
            </MenuItem>
            <MenuItem Header="Параметры">
                <MenuItem x:Name="DataRxItem" Header="Прием данных" Click="DataRxItem_OnClick"/>
                <MenuItem x:Name="WeightParamItem" Header="Определение веса" Click="WeightParamItem_OnClick"/>
                <MenuItem x:Name="WeightCalibItem" Header="Весовая калибровка" Click="WeightCalibItem_OnClick"/>
                <MenuItem x:Name="StartUpCalibItem" Header="Начальная калибровка" Click="StartUpCalibItem_Click" />
                <MenuItem x:Name="FastWeightCalibItem" Header="Быстрая весовая калибровка" Click="FastWeightCalibItem_Click" />
                <MenuItem x:Name="Test1" Header="Test1" Click="Test1_OnClick" />
                <MenuItem x:Name="Test2" Header="Test2" Click="Test2_OnClick" />
                <MenuItem x:Name="Test3" Header="Добавить пациента" Click="Test3_OnClick" />
            </MenuItem>
            <Ellipse x:Name="StatusMark" Height="15" Width="15" Fill="Red" IsEnabled="False" Stroke="Black"/>
        </Menu>
        <Grid Grid.Row="1" x:Name="MainGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="238" MinWidth="238" MaxWidth="238"/>
                <ColumnDefinition/>
                <ColumnDefinition MinWidth="183" Width="0*"/>
            </Grid.ColumnDefinitions>

            <Grid x:Name="PatButGrid" Grid.Column="0" Margin="0,0,10,0" UseLayoutRounding="True">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <ToolBar Grid.Row="0" Margin="0,3,3,3" Height="55" Background="#FFE4E4E4" IsHitTestVisible="True" UseLayoutRounding="True">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="5,0,0,0">
                        <Button x:Name="but_Add"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Blue}" VerticalContentAlignment="Center" Click="but_Add_Click" ToolTip="Добавить нового пациента">
                            <Path Data="M275.4,295.8c81.682,0,147.899-66.217,147.899-147.9C423.299,66.218,357.082,0,275.4,0c-81.683,0-147.9,66.217-147.9,147.9   C127.5,229.583,193.717,295.8,275.4,295.8z M345.461,206.604c-6.729,22.246-35.549,38.968-70.09,38.968   c-34.542,0-63.363-16.723-70.091-38.968H345.461z M586.5,510v20.4c0,5.634-4.566,10.2-10.199,10.2H515.1V601.8   c0,5.634-4.566,10.2-10.199,10.2h-20.4c-5.633,0-10.199-4.566-10.199-10.2v-61.199H413.1c-5.633,0-10.199-4.566-10.199-10.2V510   c0-5.633,4.566-10.199,10.199-10.199h61.201v-61.2c0-5.634,4.566-10.2,10.199-10.2h20.4c5.633,0,10.199,4.566,10.199,10.2v61.2   h61.201C581.934,499.8,586.5,504.367,586.5,510z M382.5,510v20.4c0,5.419,1.535,10.438,4.016,14.857   c-30.803,3.35-67.52,5.542-111.116,5.542c-142.607,0-212.393-23.302-237.979-34.686c-6.602-2.938-11.921-11.336-11.921-18.562   V448.8c0-73.056,55.624-133.663,126.599-141.78c2.157-0.247,5.355,0.677,7.113,1.949C191.938,332.66,232.002,346.8,275.4,346.8   s83.463-14.14,116.188-37.831c1.758-1.272,4.957-2.196,7.113-1.949c58.746,6.719,106.869,49.438,121.744,105.37   c-4.572-2.724-9.848-4.389-15.545-4.389h-20.4c-16.873,0-30.6,13.726-30.6,30.6v40.8H413.1C396.227,479.4,382.5,493.126,382.5,510z" Fill="#006DF0" Stretch="Fill"/>
                        </Button>

                        <TextBox x:Name="text_ID" Margin="20,10,5,10" TextWrapping="Wrap" Text="Введите ID" VerticalAlignment="Center" BorderBrush="Black" MaxLines="1" Width="75" LostKeyboardFocus="text_ID_LostFocus" GotKeyboardFocus="text_ID_GotFocus" PreviewTextInput="text_PreviewTextInput" KeyUp="text_ID_KeyUp">
                            <TextBox.Resources>
                                <Color x:Key="TextColorGray">#FF6D6D6D</Color>
                                <Color x:Key="TextColorBlack">Black</Color>
                            </TextBox.Resources>
                            <TextBox.Foreground>
                                <SolidColorBrush Color="{DynamicResource TextColorGray}"/>
                            </TextBox.Foreground>
                            <TextBox.Effect>
                                <DropShadowEffect ShadowDepth="0" BlurRadius="10"/>
                            </TextBox.Effect>
                        </TextBox>
                        <Button x:Name="but_find"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Blue}" VerticalContentAlignment="Center" ToolTip="Найти по ID" Click="but_find_Click">
                            <Path Data="M23.111 20.058l-4.977-4.977c.965-1.52 1.523-3.322 1.523-5.251 0-5.42-4.409-9.83-9.829-9.83-5.42 0-9.828 4.41-9.828 9.83s4.408 9.83 9.829 9.83c1.834 0 3.552-.505 5.022-1.383l5.021 5.021c2.144 2.141 5.384-1.096 3.239-3.24zm-20.064-10.228c0-3.739 3.043-6.782 6.782-6.782s6.782 3.042 6.782 6.782-3.043 6.782-6.782 6.782-6.782-3.043-6.782-6.782zm2.01-1.764c1.984-4.599 8.664-4.066 9.922.749-2.534-2.974-6.993-3.294-9.922-.749z" Stretch="Fill" Fill="#FF006DF0"/>
                        </Button>
                    </StackPanel>
                </ToolBar>
                <local:PatientControl x:Name="form_Pat" Grid.Row="1" Width="200" Margin="5,5,0,0" HorizontalAlignment="Left"/>
                <StackPanel Grid.Row="2">
                    <Label  Content="Список исследований:" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                    <DataGrid x:Name="grid_Anam" Grid.Row="2" Margin="2" ItemsSource="{Binding Anamnesis}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Center" AutoGenerateColumns="False" HeadersVisibility="Column" SelectionMode="Single" SelectionChanged="grid_Anam_SelectionChanged" >
                        <DataGrid.Columns>
                            <DataGridTextColumn Binding="{Binding Datetime, Converter={StaticResource DateTimeConverter}}" ClipboardContentBinding="{x:Null}" Header="Дата проведения"/>
                            <DataGridTextColumn Binding="{Binding Weight}" ClipboardContentBinding="{x:Null}" Header="Вес"/>
                            <DataGridTextColumn Binding="{Binding Info}" ClipboardContentBinding="{x:Null}" Header="Информация"/>
                        </DataGrid.Columns>
                        <DataGrid.DataContext>
                            <local:PatientBaseDataSet Locale="ru-RU"/>
                        </DataGrid.DataContext>
                    </DataGrid>
                </StackPanel>

            </Grid>
            <GridSplitter Width="10" Grid.Column="0" Cursor="Hand"/>
            <GridSplitter Width="10" Grid.Column="2" HorizontalAlignment="Left"/>
            <Grid Grid.Column="2" Margin="10,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="343*"/>
                    <RowDefinition Height="130" MaxHeight="130"/>
                </Grid.RowDefinitions>
                <ToolBar Grid.Row="0" Background="#FFE4E4E4" IsHitTestVisible="True" UseLayoutRounding="True" Height="55" Margin="3,3,0,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="5,0,0,0">
                        <Button x:Name="but_save"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Blue}" VerticalContentAlignment="Center" ToolTip="Сохранить текущий замер" Click="but_save_Click">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Path Data="M432.823,121.049c-3.806-9.132-8.377-16.367-13.709-21.695l-79.941-79.942c-5.325-5.325-12.56-9.895-21.696-13.704   C308.346,1.903,299.969,0,292.357,0H27.409C19.798,0,13.325,2.663,7.995,7.993c-5.33,5.327-7.992,11.799-7.992,19.414v383.719   c0,7.617,2.662,14.089,7.992,19.417c5.33,5.325,11.803,7.991,19.414,7.991h383.718c7.618,0,14.089-2.666,19.417-7.991   c5.325-5.328,7.987-11.8,7.987-19.417V146.178C438.531,138.562,436.629,130.188,432.823,121.049z M182.725,45.677   c0-2.474,0.905-4.611,2.714-6.423c1.807-1.804,3.949-2.708,6.423-2.708h54.819c2.468,0,4.609,0.902,6.417,2.708   c1.813,1.812,2.717,3.949,2.717,6.423v91.362c0,2.478-0.91,4.618-2.717,6.427c-1.808,1.803-3.949,2.708-6.417,2.708h-54.819   c-2.474,0-4.617-0.902-6.423-2.708c-1.809-1.812-2.714-3.949-2.714-6.427V45.677z M328.906,401.991H109.633V292.355h219.273   V401.991z M402,401.991h-36.552h-0.007V283.218c0-7.617-2.663-14.085-7.991-19.417c-5.328-5.328-11.8-7.994-19.41-7.994H100.498   c-7.614,0-14.087,2.666-19.417,7.994c-5.327,5.328-7.992,11.8-7.992,19.417v118.773H36.544V36.542h36.544v118.771   c0,7.615,2.662,14.084,7.992,19.414c5.33,5.327,11.803,7.993,19.417,7.993h164.456c7.61,0,14.089-2.666,19.41-7.993   c5.325-5.327,7.994-11.799,7.994-19.414V36.542c2.854,0,6.563,0.95,11.136,2.853c4.572,1.902,7.806,3.805,9.709,5.708l80.232,80.23   c1.902,1.903,3.806,5.19,5.708,9.851c1.909,4.665,2.857,8.33,2.857,10.994V401.991z" Fill="#006DF0" Stretch="Fill"/>
                                <!--rect x="6" y="22" width="20" height="2" fill="#006DF0"/>
                                <rect x="6" y="26" width="20" height="2" fill="#006DF0"/>
                                <rect x="18" y="2" width="4" height="9" fill="#006DF0"/-->
                            </Grid>
                        </Button>

                        <Button x:Name="but_del"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Blue}" VerticalContentAlignment="Center" ToolTip="Очистить" Margin="10,0,0,0" Click="but_del_Click">
                            <Path Data="M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316    H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293    c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329    c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355    c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356    c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z                                   M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916    c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z" Fill="#006DF0" Stretch="Fill"/>
                        </Button>
                    </StackPanel>
                </ToolBar>
                <Grid Grid.Row="1" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Label Grid.Row="0" Content="Результаты замеров:" HorizontalAlignment="Center" />
                    <DataGrid x:Name="grid_Result" Grid.Row="1" AutoGenerateColumns="False" CanUserReorderColumns="False" HeadersVisibility="Column" IsReadOnly="True">
                        <DataGrid.DataContext>
                            <Device:cDeviceItem/>
                        </DataGrid.DataContext>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="№" Binding="{Binding Num, StringFormat=\{0:d\}}" MaxWidth="60"/>
                            <DataGridTextColumn Header="CH_1" Binding="{Binding CH_1, StringFormat=\{0:F\}}" MaxWidth="120"/>
                            <DataGridTextColumn Header="CH_2" Binding="{Binding CH_2, StringFormat=\{0:F\}}" MaxWidth="120"/>
                            <DataGridTextColumn Header="CH_3" Binding="{Binding CH_3, StringFormat=\{0:F\}}" MaxWidth="120"/>
                            <DataGridTextColumn Header="CH_4" Binding="{Binding CH_4, StringFormat=\{0:F\}}" MaxWidth="120"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
                <GroupBox Header="Информация" Grid.Row="2" Margin="5">
                    <TextBox x:Name="text_Info" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" MaxLength="6000" />
                </GroupBox>

            </Grid>
            
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBox x:Name="Tenz3" HorizontalAlignment="Left" Height="60" Grid.Row="0" TextWrapping="Wrap" VerticalAlignment="Top" Width="104" FontFamily="Segoe Print" FontSize="22" IsReadOnly="True" VerticalContentAlignment="Center" HorizontalContentAlignment="Center"/>
                <TextBox x:Name="Tenz0" HorizontalAlignment="Right" Height="60" Grid.Row="0" TextWrapping="Wrap" VerticalAlignment="Top" Width="104" FontFamily="Segoe Print" FontSize="22" IsReadOnly="True" VerticalContentAlignment="Center" HorizontalContentAlignment="Center"/>
                <TextBox x:Name="Tenz2" HorizontalAlignment="Left" Height="60" Grid.Row="2" TextWrapping="Wrap" VerticalAlignment="Top" Width="104" FontFamily="Segoe Print" FontSize="22" IsReadOnly="True" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                <TextBox x:Name="Tenz1" HorizontalAlignment="Right" Height="60" Grid.Row="2" TextWrapping="Wrap" VerticalAlignment="Top" Width="104" FontFamily="Segoe Print" FontSize="22" IsReadOnly="True" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                <Button x:Name="button1" Content="Start" HorizontalAlignment="Left" Height="60" Margin="120,18,0,-48" Grid.Row="1" VerticalAlignment="Top" Width="100" FontFamily="SketchFlow Print" FontSize="24" Click="Button_Click_1" />
                <Button Content="Stop" HorizontalAlignment="Left" Height="60" Margin="120,195,0,-225" Grid.Row="1" VerticalAlignment="Top" Width="100" FontFamily="SketchFlow Print" FontSize="24" Click="Button_Click_2" />
                <Button x:Name="button4" Content="Weight" HorizontalAlignment="Left" Height="60" Margin="180,106,0,-136" Grid.Row="1" VerticalAlignment="Top" Width="119" FontFamily="SketchFlow Print" FontSize="24" Click="button4_Click" />
                <TextBox x:Name="TextBoxWeight" HorizontalAlignment="Left" Height="60" Margin="50,106,0,-136" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Width="104" FontFamily="Segoe Print" FontSize="22" IsReadOnly="True"/>
                <DataGrid x:Name="grid" HorizontalAlignment="Left" Height="100" Margin="0,279,0,-349" Grid.Row="1" VerticalAlignment="Top" Width="503" CanUserReorderColumns="False" HeadersVisibility="Column" AutoGenerateColumns="False" ItemsSource="{Binding DataTable1, Mode=OneWay}" Visibility="Hidden">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding ID, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="ID"/>
                        <DataGridTextColumn Binding="{Binding Surname, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Фамилия"/>
                        <DataGridTextColumn Binding="{Binding Name, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Имя"/>
                        <DataGridTextColumn Binding="{Binding Patronymic, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Отчество"/>
                        <DataGridTextColumn Binding="{Binding Sex, Converter={StaticResource SexesConverter}, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Пол"/>
                        <DataGridTextColumn Binding="{Binding Birthdate, Converter={StaticResource DateConverter}, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Дата рождения"/>
                        <DataGridTextColumn Binding="{Binding Street, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Улица"/>
                        <DataGridTextColumn Binding="{Binding House, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Дом"/>
                        <DataGridTextColumn Binding="{Binding Flat, Mode=OneWay}" ClipboardContentBinding="{x:Null}" Header="Кв-ра"/>
                    </DataGrid.Columns>
                    <DataGrid.DataContext>
                        <local:PatientBaseDataSet Locale="ru-RU" EnforceConstraints="False"/>
                    </DataGrid.DataContext>
                </DataGrid>

                <WindowsFormsHost Grid.Row="1">
                    <zedGraph:ZedGraphControl x:Name="testGraph" Name="testGraph" />
                </WindowsFormsHost>

                <ToolBar Grid.Row="2" Background="#FFE4E4E4" IsHitTestVisible="True" UseLayoutRounding="True" Height="55" Margin="3,3,0,0" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="5,0,0,0">
                        <Button x:Name="but_st"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Green}" VerticalContentAlignment="Center" ToolTip="Запустить вычитку данных" Margin="0,0,10,0" Click="but_st_Click">
                           <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Path Stretch="Fill" Fill="#FF22CF11">
                                    <Path.Data>
                                        M287.86,155.604v26.038c0,18.019-14.589,32.626-32.625,32.626c-18,0-32.626-14.607-32.626-32.626v-26.038   
                                        c-40.561,13.667-69.909,51.997-69.909,97.123c0,56.539,46.013,102.535,102.535,102.535c56.557,0,102.535-45.996,102.535-102.535  
                                        C357.77,207.601,328.439,169.271,287.86,155.604z M256.002,10.276C120.283,10.276,10.278,120.299,10.278,256c0,135.72,110.005,245.724,245.724,245.724   
                                        c135.702,0,245.72-110.004,245.72-245.724C501.722,120.299,391.704,10.276,256.002,10.276z M255.235,404.202
                                        c-83.509,0-151.475-67.957-151.475-151.476c0-72.313,50.981-132.867,118.849-147.843V82.599c0-18.019,14.625-32.63,32.626-32.63   
                                        c18.037,0,32.625,14.611,32.625,32.63v22.285c67.887,14.976,118.85,75.529,118.85,147.843   
                                        C406.71,336.245,338.762,404.202,255.235,404.202z
                                    </Path.Data>
                                   </Path>
                            </Grid>
                        </Button>
                        <TextBox Margin="0,0,5,0" Text="{Binding Value, ElementName=slider, Mode=TwoWay, StringFormat=\{0:F0\}, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontFamily="Segoe Print" FontSize="22" Width="60"/>
                        <Slider x:Name="slider" ToolTip="Время" Maximum="120" Width="71" VerticalAlignment="Center" TickPlacement="BottomRight" Ticks="{x:Null}" Minimum="30" Value="30" SmallChange="1" LargeChange="5" AutoToolTipPlacement="TopLeft" TickFrequency="10" MouseWheel="slider_MouseWheel" ValueChanged="slider_ValueChanged" />
                        <Button x:Name="but_rec"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Red}" VerticalContentAlignment="Center" ToolTip="Запустить вычитку данных" Margin="10,0,0,0" Click="but_rec_Click">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Path Stretch="Fill" Fill="Red">
                                    <Path.Data>
                                       M293.002,78.53C249.646,3.435,153.618-22.296,78.529,21.068C3.434,64.418-22.298,160.442,21.066,235.534     
                                       c43.35,75.095,139.375,100.83,214.465,57.47C310.627,249.639,336.371,153.62,293.002,78.53z M219.834,265.801
                                       c-60.067,34.692-136.894,14.106-171.576-45.973C13.568,159.761,34.161,82.935,94.23,48.26
                                       c60.071-34.69,136.894-14.106,171.578,45.971C300.493,154.307,279.906,231.117,219.834,265.801z M213.555,150.652l-82.214-47.949   
                                       c-7.492-4.374-13.535-0.877-13.493,7.789l0.421,95.174c0.038,8.664,6.155,12.191,13.669,7.851l81.585-47.103     
                                       C221.029,162.082,221.045,155.026,213.555,150.652z
                                    </Path.Data>
                                </Path>
                            </Grid>
                        </Button>
                        <Button x:Name="but_stop"   Padding="0" Template="{DynamicResource ButtonTemplate}" BorderThickness="0" Style="{StaticResource shadow_Red}" VerticalContentAlignment="Center" ToolTip="Запустить вычитку данных" Margin="10,0,0,0" Visibility="Collapsed" Click="but_stop_Click">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Path Stretch="Fill" Fill="Red">
                                    <Path.Data>
                                        M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,464   
                                        c-114.875,0-208-93.125-208-208S141.125,48,256,48s208,93.125,208,208S370.875,464,256,464z M160,160h192v192H160V160z
                                    </Path.Data>
                                </Path>
                            </Grid>
                        </Button>
                        
                    </StackPanel>
                </ToolBar>
              </Grid>
        </Grid>

        <StatusBar Grid.Row="2">
            <Label  FontFamily="Segoe Print" FontSize="18" Content="Таймер:" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Padding="0"/>
            <TextBox x:Name="text_Timer" IsReadOnly="True" IsUndoEnabled="False" FontFamily="Segoe Print" FontSize="20" Width="60" Text="{Binding TimerCount, Mode=OneWay, StringFormat=\{0:D\}}" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Padding="0">
                <TextBox.DataContext>
                    <Device:ProgressEventArgs/>
                </TextBox.DataContext>
            </TextBox>
            <Label  FontFamily="Segoe Print" FontSize="18" Content="сек." VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Padding="0"/>
            <ProgressBar x:Name="bar_meas" Height="25" Width="600" Margin="10,0,0,0" />
        </StatusBar>
    </Grid>


</Window>
